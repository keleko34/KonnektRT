var KonnektRT=function(){var m=function(){var l=require("fs"),m=require("querystring"),z=process.cwd().replace(/\\/g,"/")+"/app";require("path");var C=require("replacestream"),D=require("stream"),E=require("util");return function(){function w(a,d,b){if(0===a.url.indexOf("/component")){a.query||(a.query={});a.stringQuery=w.parseQuery(a.url);a.url=a.url.substring(0,a.url.indexOf("?"));b=0;for(var f=Object.keys(a.stringQuery),e=f.length;b<e;b++)a.query[f[b]]=a.stringQuery[f[b]];var c=a.url.replace("/component/",
""),n=a.query.env||"prod";b=a.query.debug;var A=a.query.edit,m=a.sessions?a.sessions.cms:!1;a="dev"!==n?"/build/"+n+"/"+c+(b?".js":".min.js"):".js";var t=z+"/components/"+c,x=z+"/components/"+c+"/"+("dev"===n?c+a:a),g,h=0,k=0;l.stat(x,function(a,b){if(!a&&b.isFile())if("dev"===n){var f=function(a,b,f,e){!a&&f&&b?e?g.pipe(p(c,"k_cms")).pipe(q(g,c,"k_cms","(function(){"+content+"\r\nreturn "+c+";\r\n}())")).pipe(p(c,"k_html")).pipe(q(g,c,"k_html",b,!0)).pipe(p(c,"k_css")).pipe(q(g,c,"k_css",f,!0)).pipe(d):
g.pipe(p(c,"k_html")).pipe(q(g,c,"k_html",b,!0)).pipe(p(c,"k_css")).pipe(q(g,c,"k_css",f,!0)).pipe(d):g.pipe(d)};k+=2;g=l.createReadStream(x);var e="",u="",v,r=!1;A&&m&&(k+=1,B(t,c,function(a){h+=1;v=a;h===k&&f(r,e,u,v)}));l.readFile(t+"/"+c+".html","utf8",function(a,b){h+=1;r=!!a;e=b;h===k&&f(r,e,u,v)});l.readFile(t+"/"+c+".css","utf8",function(a,b){h+=1;r=!!a;u=b;h===k&&f(r,e,u,v)})}else g=l.createReadStream(x),A&&m&&(k+=1,g.pipe(p(c,"k_cms")),B(t,c,function(a){h+=1;g.pipe(p(c,"k_cms")).pipe(q(g,
c,"k_cms","(function(){"+a+"\r\nreturn "+c+";\r\n}())",!1));h===k&&g.pipe(d)})),0===k&&g.pipe(d);else a&&"ENOENT"===a.code?"dev"!==n?d.notFound?d.notFound(void 0,"You have not built the component "+c+" into environment "+n):y(d,404,"You have not built the component "+c+" into environment "+n):d.notFound?d.notFound(void 0,"There is no such component by the name "+c):y(d,404,"There is no such component by the name "+c):d.serverError?d.serverError():y(d,500,"Server error")})}else b()}function y(a,d,
b){a.statusCode=d;a.statusMessage=b;a.write(b,"utf8",function(){a.end()})}function B(a,d,b){var f=0;l.readFile(a+"/cms/"+d+".js","utf8",function(e,c){e?b("function "+d+"(){/*There was an error retrieving cms components*/};"):(l.readFile(a+"/cms/"+d+".html","utf8",function(a,e){a?b("function "+d+"(){/*There was an error retrieving cms components*/};"):(c+="\r\n"+d+'.prototype.k_html = "'+e.replace(/[\r\n]/g,"")+'";',f+=1,2===f&&b(c))}),l.readFile(a+"/cms/"+d+".css","utf8",function(a,e){a?b("function "+
d+"(){/*There was an error retrieving cms components*/};"):(c+="\r\n"+d+'.prototype.k_css = "'+e.replace(/[\r\n]/g,"")+'";',f+=1,2===f&&b(c))}))})}function F(a){function d(a){b.call(this,a)}var b=D.Transform;E.inherits(d,b);d.prototype._transform=function(b,d,c){this.push("function"===typeof a?a(b.toString()):b.toString());c()};return new d(a)}function p(a,d){var b=0,f=!1;return F(function(e){f&&(b+=e.split("{").length-1,b-=e.split("}").length-1);-1!==e.indexOf(a)&&(f=!0,b+=e.split("{").length-1,
b-=e.split("}").length-1);0===b&&f&&(e+="\r\n"+a+".prototype."+d+" = ''");return e})}function q(a,d,b,f,e){return C(d+".prototype."+b+" = ''",d+".prototype."+b+" = "+(e?"'":"")+f.replace(/(\")/g,'/"').replace(/[\r\n]/g,"")+(e?"'":"")+";")}w.parseQuery=function(a){return m.parse(a.substring(a.indexOf("?")+1,a.length))};return w}}();"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return m}):"undefined"!==typeof module&&(module.exports=
m);return m}();
