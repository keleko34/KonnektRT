var KonnektRT=function(){var m=function(){var l=require("fs"),m=require("querystring"),w=process.cwd().replace(/\\/g,"/")+"/app";require("path");var z=require("replacestream"),A=require("stream"),B=require("util");return function(){function t(a,c,b){if(0===a.url.indexOf("/component")){a.query||(a.query={});a.stringQuery=t.parseQuery(a.url);a.url=a.url.substring(0,a.url.indexOf("?"));b=0;for(var e=Object.keys(a.stringQuery),g=e.length;b<g;b++)a.query[e[b]]=a.stringQuery[e[b]];var d=a.url.replace("/component/",
""),n=a.query.env||"prod";b=a.query.debug;var m=a.query.edit,x=a.sessions?a.sessions.cms:!1;a="dev"!==n?"/build/"+n+"/"+d+(b?".js":".min.js"):".js";var q=w+"/components/"+d,u=w+"/components/"+d+"/"+("dev"===n?d+a:a),f,h=0,k=0;l.stat(u,function(a,b){!a&&b.isFile()?"dev"===n?(k+=2,f=l.createReadStream(u),m&&x&&(k+=1,y(q,d,function(a){h+=1;f.pipe(p(d,"k_cms")).pipe(r(f,d,"k_cms","(function(){"+a+"\r\nreturn "+d+";\r\n}())"));h===k&&f.pipe(c)})),l.readFile(q+"/"+d+".html","utf8",function(a,b){h+=1;a||
f.pipe(p(d,"k_html")).pipe(r(f,d,"k_html",'"'+b+'"'));h===k&&f.pipe(c)}),l.readFile(q+"/"+d+".css","utf8",function(a,b){h+=1;a||f.pipe(p(d,"k_css")).pipe(r(f,d,"k_css",'"'+b+'"'));h===k&&f.pipe(c)})):(f=l.createReadStream(u),m&&x&&(k+=1,f.pipe(p(d,"k_cms")),y(q,d,function(a){h+=1;f.pipe(p(d,"k_cms")).pipe(r(f,d,"k_cms","(function(){"+a+"\r\nreturn "+d+";\r\n}())"));h===k&&f.pipe(c)})),0===k&&f.pipe(c)):a&&"ENOENT"===a.code?"dev"!==n?c.notFound?c.notFound(void 0,"You have not built the component "+
d+" into environment "+n):v(c,404,"You have not built the component "+d+" into environment "+n):c.notFound?c.notFound(void 0,"There is no such component by the name "+d):v(c,404,"There is no such component by the name "+d):c.serverError?c.serverError():v(c,500,"Server error")})}else b()}function v(a,c,b){a.statusCode=c;a.statusMessage=b;a.write(b,"utf8",function(){a.end()})}function y(a,c,b){var e=0;l.readFile(a+"/cms/"+c+".js","utf8",function(g,d){g?b("function "+c+"(){};"):(l.readFile(a+"/cms/"+
c+".html","utf8",function(a,d){a?b("function "+c+"(){};"):(e+=1,2===e&&b(contetnMain))}),l.readFile(a+"/cms/"+c+".css","utf8",function(a,d){a?b("function "+c+"(){};"):(e+=1,2===e&&b(contetnMain))}))})}function C(a){function c(a){b.call(this,a)}var b=A.Transform;B.inherits(c,b);c.prototype._transform=function(b,c,d){this.push("function"===typeof a?a(b.toString()):b.toString());d()};return new c(a)}function p(a,c){var b=0,e=!1;return C(function(g){e&&(b+=g.split("{").length-1,b-=g.split("}").length-
1);-1!==g.indexOf(a)&&(e=!0,b+=g.split("{").length-1,b-=g.split("}").length-1);0===b&&e&&(g+="\r\n"+a+".prototype."+c+" = ''");return g})}function r(a,c,b,e){return z(c+".prototype."+b+" = ''",c+".prototype."+b+" = "+e)}t.parseQuery=function(a){return m.parse(a.substring(a.indexOf("?")+1,a.length))};return t}}();"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return m}):"undefined"!==typeof module&&(module.exports=m);return m}();
